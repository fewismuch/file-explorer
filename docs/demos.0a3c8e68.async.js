"use strict";(self.webpackChunk_rainetian_file_explorer=self.webpackChunk_rainetian_file_explorer||[]).push([[433],{6515:function($,x,t){t.d(x,{B:function(){return j}});var j=[{id:1,parent:0,droppable:!0,text:"Folder 1"},{id:2,parent:1,droppable:!1,text:"File1-1.vue"},{id:3,parent:1,droppable:!1,text:"File 1-2"},{id:4,parent:0,droppable:!0,text:"Folder 2"},{id:5,parent:4,droppable:!0,text:"Folder 2-1"},{id:6,parent:5,droppable:!1,text:"File 2-1-1"},{id:7,parent:0,droppable:!1,text:"File 3 \u8FD9\u662F\u4E00\u4E2A\u6BD4\u8F83\u957F\u7684\u6807\u9898"}]},58743:function($,x,t){t.r(x);var j=t(48305),f=t.n(j),R=t(88180),c=t(50959),T=t(6515),u=t(11527),S=function(){var h=(0,c.useState)(T.B),i=f()(h,2),e=i[0],H=i[1],z=function(L){H(L)};return(0,u.jsx)("div",{style:{width:250,border:"1px solid #ccc",padding:12},children:(0,u.jsx)(R.ZP,{data:e,rootId:0,initialOpen:!0,onChange:z})})};x.default=S},92048:function($,x,t){t.r(x);var j=t(88180),f=t(50959),R=t(6515),c=t(11527),T=function(){var S=function(h){var i=h.node;return(0,c.jsxs)("span",{style:{color:"blue"},children:[i.id,"-",i.text]})};return(0,c.jsx)(j.ZP,{data:R.B,rootId:0,titleRender:function(h){return(0,c.jsx)(S,{node:h})},switcherIcon:(0,c.jsx)("span",{children:"\u25B6\uFE0F"}),fileIcon:!1})};x.default=T},54428:function($,x,t){t.r(x);var j=t(88180),f=t(50959),R=t(6515),c=t(11527),T=function(){return(0,c.jsx)("div",{children:(0,c.jsx)(j.ZP,{data:R.B,rootId:0,canDrag:function(){return!1},initialOpen:!0})})};x.default=T},69473:function($,x,t){t.r(x);var j=t(48305),f=t.n(j),R=t(88180),c=t(50959),T=t(6515),u=t(11527),S=function(){var h=(0,c.useState)(T.B),i=f()(h,2),e=i[0],H=i[1],z=function(L){H(L)};return(0,u.jsx)("div",{children:(0,u.jsx)(R.ZP,{data:e,rootId:0,onChange:z})})};x.default=S},86226:function($,x,t){t.r(x);var j=t(48305),f=t.n(j),R=t(88180),c=t(50959),T=t(6515),u=t(11527),S=function(){var h=(0,c.useRef)(null),i=(0,c.useState)(T.B),e=f()(i,2),H=e[0],z=e[1],V=function(p,G){var ce=G.action,se=G.oldTree,fe=G.oldNode,ve=G.newNode;console.log(ce,se,fe,ve),z(p)};return(0,u.jsxs)("div",{style:{width:250,border:"1px solid #ccc"},children:[(0,u.jsx)("button",{onClick:function(){var p;return(p=h.current)===null||p===void 0?void 0:p.addFile()},children:"add file"}),(0,u.jsx)("button",{onClick:function(){var p;return(p=h.current)===null||p===void 0?void 0:p.addFolder()},children:"add folder"}),(0,u.jsx)("button",{onClick:function(){var p;return(p=h.current)===null||p===void 0?void 0:p.closeAll()},children:"closeAll"}),(0,u.jsx)("button",{onClick:function(){var p;return(p=h.current)===null||p===void 0?void 0:p.openAll()},children:"openAll"}),(0,u.jsx)(R.ZP,{fileExplorerRef:h,data:H,onChange:V,onSelect:function(p){return console.log(p)},rootId:0,enableSelect:!0,showActions:!0,initialOpen:!0})]})};x.default=S},95607:function($,x,t){t.r(x);var j=t(48305),f=t.n(j),R=t(88180),c=t(50959),T=t(6515),u=t(11527),S=function(){var h=(0,c.useState)(null),i=f()(h,2),e=i[0],H=i[1];return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:["Selected: ",e==null?void 0:e.text]}),(0,u.jsx)("br",{}),(0,u.jsx)(R.ZP,{data:T.B,rootId:0,initialOpen:!0,onSelect:function(V){console.log(V),H(V)},selectedId:2})]})};x.default=S},88180:function($,x,t){t.d(x,{ZP:function(){return Se}});var j=t(26068),f=t.n(j),R=t(15558),c=t.n(R),T=t(48305),u=t.n(T),S=t(67825),w=t.n(S),h=t(28724),i=t(50959),e=t(11527),H=["style","name"],z=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m320 512V448h64v128h128v64H544v128h-64V640H352v-64z"})})},V=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m384 416V416h64v128h128v64H544v128h-64V608H352v-64z"})})},L=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"delete",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})})},p=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"edit",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"})})},G=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896"})})},ce=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"right",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})})},se=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})})},fe=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32"})})},ve=function(){return(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",focusable:"false",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M474.88 680.96c20.48-20.48 53.76-20.48 74.24 0l254.6688 253.5936c20.5312 20.48 20.5312 53.6064 0 74.0864-20.48 20.48-53.76 20.48-74.24 0L512 792.1152l-217.5488 216.576c-20.48 20.4288-53.76 20.4288-74.24 0-20.5312-20.48-20.5312-53.7088 0-74.1376zM294.4 15.36L512 231.8848l217.5488-216.576c20.48-20.4288 53.76-20.4288 74.24 0 20.5312 20.48 20.5312 53.7088 0 74.1376L549.12 343.04c-20.48 20.48-53.76 20.48-74.24 0L220.16 89.4464C199.68 68.9664 199.68 35.84 220.16 15.36c20.48-20.48 53.76-20.48 74.24 0z"})})},Ae={file:(0,e.jsx)(se,{}),folder:(0,e.jsx)(fe,{}),addFile:(0,e.jsx)(z,{}),addFolder:(0,e.jsx)(V,{}),delete:(0,e.jsx)(L,{}),edit:(0,e.jsx)(p,{}),folderOpen:(0,e.jsx)(G,{}),right:(0,e.jsx)(ce,{}),collapse:(0,e.jsx)(ve,{})},N=function(n){var l=n.style,E=n.name,o=w()(n,H);return(0,e.jsx)("span",f()(f()({},o),{},{style:f()({display:"flex",alignItems:"center"},l),children:Ae[E]}))},je=function(n){var l=n.text,E=n.onChange,o=n.onCancel,r=(0,i.useRef)(null),g=(0,i.useState)(l),s=u()(g,2),O=s[0],F=s[1],W=function(I){F(I.target.value)},y=function(){if(O===""&&l===""){o(!0);return}if(O===l||O.trim()===""){o();return}E(O,l==="")},Z=function(){if(l===""||l===void 0){o(!0);return}F(l),o()},b=function(I){I.key==="Enter"?(I.preventDefault(),y()):I.key==="Escape"&&(I.preventDefault(),Z())};return(0,i.useEffect)(function(){var C;r==null||(C=r.current)===null||C===void 0||C.focus()},[]),(0,e.jsx)("div",{className:"inputWrapper file-explorer__node-actions",onClick:function(I){return I.stopPropagation()},children:(0,e.jsx)("input",{ref:r,className:"textField  nodeInput",value:O,onChange:W,onBlur:y,onKeyDown:b})})};function Oe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(m){var n=Math.random()*16|0,l=m==="x"?n:n&3|8;return l.toString(16)}).replace(/-/g,"")}var De=function(n,l){var E;return n.forEach(function(o){var r=l.find(function(g){return g.id===o.id});if(o.parent!==(r==null?void 0:r.parent))return E=o,null}),E};function Me(m){var n=[],l={};for(var E in m){for(var o=E.startsWith("/")?E.slice(1).split("/"):E.split("/"),r=0,g=0;g<o.length-1;g++){var s=o.slice(0,g+1).join("/");if(!l[s]){var O=n.length+1;l[s]=O,n.push({id:O,parent:r,droppable:!0,text:o[g]})}r=l[s]}var F=o.pop(),W=n.length+1;n.push({id:W,parent:r,droppable:!1,text:F,content:m[E]})}return n}function Ie(m){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l={};return m.forEach(function(E){if(!E.droppable){for(var o="",r=E.parent;r!==n;){var g=m.find(function(s){return s.id===r});o=g.text+"/"+o,r=g.parent}o===""?o=E.text:o+=E.text,l[o]=E.content}}),l}var X="_draft_id_",Re=function(n){var l=n.dragOverAutoExpand,E=n.clickRowAutoExpand,o=n.isSelected,r=n.isOpen,g=r===void 0?!1:r,s=n.showActions,O=s===void 0?!0:s,F=n.titleRender,W=n.switcherIcon,y=n.fileIcon,Z=n.node,b=Z.id,C=Z.droppable,I=Z.text,_e=(0,i.useState)(!1),Y=u()(_e,2),k=Y[0],J=Y[1],xe=n.depth*24,he=(0,i.useState)(!1),ae=u()(he,2),Q=ae[0],le=ae[1],oe=k||I==="",q=function(v){v.stopPropagation(),n.onToggle(b)},ee=(0,h.t0)(b,g,n.onToggle),ne=l?ee:{},pe=function(v){v.stopPropagation(),J(!0)},ie=function(v){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(J(!1),P){n.onTextChange("_draft_id_",v);return}n.onTextChange(b,v)},te=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;v&&n.onRemove(b,!0),J(!1)},de=function(v){v.stopPropagation(),n.onCreate({id:X,text:"",parent:b,droppable:!1},!0)},me=function(v){v.stopPropagation(),n.onCreate({id:X,text:"",parent:b,droppable:!0},!0)},ue=function(v){var P;E&&q(v),(P=n.onSelect)===null||P===void 0||P.call(n,n.node)},Ee=function(v){v.stopPropagation(),n.onRemove(b)},ge=function(v){var P=v.name;if(typeof y=="boolean")return(0,e.jsx)("div",{style:{marginLeft:-4}});if(y){var M=y("folderOpen")||(0,e.jsx)(N,{name:"folderOpen"}),a=y("folder")||(0,e.jsx)(N,{name:"folder"}),_=y((P==null?void 0:P.split(".").pop())||"file")||(0,e.jsx)(N,{name:"file"});return(0,e.jsx)("div",{className:"file-explorer__node-icon","data-name":P,children:C?g?M:a:_})}else return(0,e.jsx)("div",{className:"file-explorer__node-icon","data-name":P,children:C?(0,e.jsx)(N,{name:g?"folderOpen":"folder"}):(0,e.jsx)(N,{name:"file"})})},Ce=function(){return(0,e.jsxs)("div",{className:"file-explorer__node-actions",children:[C?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{onClick:de,children:(0,e.jsx)(N,{name:"addFile"})}),(0,e.jsx)("span",{onClick:me,children:(0,e.jsx)(N,{name:"addFolder"})})]}):null,(0,e.jsx)("span",{onClick:Ee,children:(0,e.jsx)(N,{name:"delete"})}),(0,e.jsx)("span",{onClick:pe,children:(0,e.jsx)(N,{name:"edit"})})]})},re=function(){var v=W&&typeof W=="function";return(0,e.jsx)("div",{className:"file-explorer__node-expand-icon-wrapper ".concat(C?"":"disabled"),onClick:q,children:C&&(v?W(g):(0,e.jsx)("div",{className:"file-explorer__node-expand-icon ".concat(g?"isOpen":""),children:W||(0,e.jsx)(N,{name:"right"})}))})};return(0,i.useEffect)(function(){J(n.showInput||!1)},[n.showInput]),(0,e.jsxs)("div",f()(f()({className:"file-explorer__node ".concat(Q?"file-explorer__node--hover":""," ").concat(o?"file-explorer__node--selected":""),style:{paddingInlineStart:xe}},ne),{},{onMouseEnter:function(){return le(!0)},onMouseLeave:function(){return le(!1)},onClick:ue,children:[re(),ge({name:I}),(0,e.jsxs)("div",{className:"file-explorer__node-content",children:[oe?(0,e.jsx)(je,{text:I,onChange:ie,onCancel:te}):(0,e.jsx)("span",{className:"file-explorer__node-text",children:F?F(n.node):I}),Q&&!oe&&O&&Ce()]})]}))},Te=["fileExplorerRef","rootId","data","onDrop","onChange","onSelect","dragOverAutoExpand","clickRowAutoExpand","enableSelect","showActions","allowRepeatText","titleRender","switcherIcon","fileIcon","theme","selectedId"],Pe=function(n){var l=(0,i.useRef)(null),E=n.fileExplorerRef,o=n.rootId,r=n.data,g=n.onDrop,s=n.onChange,O=n.onSelect,F=n.dragOverAutoExpand,W=F===void 0?!1:F,y=n.clickRowAutoExpand,Z=y===void 0?!0:y,b=n.enableSelect,C=b===void 0?!0:b,I=n.showActions,_e=I===void 0?!1:I,Y=n.allowRepeatText,k=Y===void 0?!0:Y,J=n.titleRender,xe=n.switcherIcon,he=n.fileIcon,ae=n.theme,Q=n.selectedId,le=w()(n,Te),oe=(0,i.useState)(r),q=u()(oe,2),ee=q[0],ne=q[1],pe=(0,i.useState)(),ie=u()(pe,2),te=ie[0],de=ie[1],me=(0,i.useState)(null),ue=u()(me,2),Ee=ue[0],ge=ue[1],Ce=function(a,_){g==null||g(a,_);var d=De(r,a),U=De(a,r);if(!k){var K=r.find(function(A){return A.parent===U.parent&&A.text===d.text&&A.droppable===d.droppable});if(K)return}s==null||s(a,{action:"drop",oldTree:c()(r),oldNode:d})},re=function(a,_){var d=[a].concat(c()((0,h.mD)(r,a).map(function(A){return A.id}))),U=r.filter(function(A){return!d.includes(A.id)});if(_){ne(U);return}var K=r.find(function(A){return A.id===a});s==null||s(U,{action:"remove",oldTree:c()(r),oldNode:K})},D=function(a,_){var d=[].concat(c()(r),[a]);if(_){ne(d);return}if(!k){var U=r.find(function(A){return A.parent===a.parent&&A.text===a.text&&A.droppable===a.droppable});if(U){re(a.id,!0);return}}var K=f()(f()({},a),{},{id:Oe()});d=[].concat(c()(r),[K]),s==null||s(d,{action:"create",oldTree:c()(r),newNode:K})},v=function(a,_){if(a===X){var d=ee.find(function(B){return B.id===a});D(f()(f()({},d),{},{id:"",text:_}));return}if(!k){var U=r.find(function(B){return B.id===a}),K=r.find(function(B){return B.parent===U.parent&&B.text===_&&B.droppable===U.droppable});if(K)return}var A,be=r.map(function(B){return B.id===a?(A=B,f()(f()({},B),{},{text:_})):B});s==null||s(be,{action:"update",oldTree:c()(r),oldNode:A})},P=function(a){C&&(de(a),O==null||O(a))};return(0,i.useImperativeHandle)(E,function(){var M,a;return{addFile:function(){return D({id:X,text:"",parent:o,droppable:!1},!0)},addFolder:function(){return D({id:X,text:"",parent:o,droppable:!0},!0)},remove:function(d){return re(d,!0)},edit:function(d){ge(d)},getFiles:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Ie(ee,d)},openAll:function(){var d;return(d=l.current)===null||d===void 0?void 0:d.openAll()},closeAll:function(){var d;return(d=l.current)===null||d===void 0?void 0:d.closeAll()},open:(M=l.current)===null||M===void 0?void 0:M.open,close:(a=l.current)===null||a===void 0?void 0:a.close}}),(0,i.useEffect)(function(){ne(r)},[r]),(0,i.useEffect)(function(){if(r&&Q!==void 0){var M=r.find(function(a){return a.id===Q});M&&C&&de(M)}},[Q]),(0,e.jsx)("div",{"data-id":"file-explorer","data-theme":ae,children:(0,e.jsx)(h.WG,{backend:h.PD,children:(0,e.jsx)(h.mp,f()({ref:l,tree:ee,rootId:o,render:function(a,_){var d=_.depth,U=_.isOpen,K=_.onToggle;return(0,e.jsx)(Re,{node:a,depth:d,isOpen:U,switcherIcon:xe,isSelected:a.id===(te==null?void 0:te.id),onToggle:K,onSelect:P,onRemove:re,onTextChange:v,onCreate:D,dragOverAutoExpand:W,clickRowAutoExpand:Z,titleRender:J,showActions:_e,showInput:a.id===Ee,fileIcon:he})},onDrop:Ce,classes:{root:"file-explorer",draggingSource:"file-explorer__draggingSource",dropTarget:"file-explorer__dropTarget"}},le))})})},Be={files2tree:Me,tree2files:Ie},Se=Pe}}]);
