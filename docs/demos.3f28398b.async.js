"use strict";(self.webpackChunk_rainetian_file_explorer=self.webpackChunk_rainetian_file_explorer||[]).push([[433],{73552:function(H,s,t){t.d(s,{v:function(){return x}});var x=[{id:1,parent:0,droppable:!0,text:"Folder 1"},{id:2,parent:1,droppable:!1,text:"File 1-1"},{id:3,parent:1,droppable:!1,text:"File 1-2"},{id:4,parent:0,droppable:!0,text:"Folder 2"},{id:5,parent:4,droppable:!0,text:"Folder 2-1"},{id:6,parent:5,droppable:!1,text:"File 2-1-1"},{id:7,parent:0,droppable:!1,text:"File 3 \u8FD9\u662F\u4E00\u4E2A\u6BD4\u8F83\u957F\u7684\u6807\u9898"}]},48652:function(H,s,t){t.r(s);var x=t(86464),c=t(50959),j=t(73552),l=t(11527),O=function(){return(0,l.jsx)("div",{style:{width:250,border:"1px solid #ccc"},children:(0,l.jsx)(x.Z,{data:j.v,rootId:0})})};s.default=O},51375:function(H,s,t){t.r(s);var x=t(86464),c=t(50959),j=t(73552),l=t(11527),O=function(){var g=function(m){var D=m.node;return(0,l.jsxs)("span",{style:{color:"blue"},children:[D.id,"-",D.text]})};return(0,l.jsx)("div",{style:{width:250,border:"1px solid #ccc"},children:(0,l.jsx)(x.Z,{data:j.v,rootId:0,titleRender:function(m){return(0,l.jsx)(g,{node:m})},switcherIcon:(0,l.jsx)("span",{children:"\u25B6\uFE0F"}),showIcon:!1})})};s.default=O},51326:function(H,s,t){t.r(s);var x=t(48305),c=t.n(x),j=t(86464),l=t(50959),O=t(73552),d=t(11527),g=function(){var m=(0,l.useState)(O.v),D=c()(m,2),I=D[0],e=D[1],K=function(Z){e(Z)};return(0,d.jsx)("div",{children:(0,d.jsx)(j.Z,{data:I,rootId:0,onChange:K,enableDrag:!0})})};s.default=g},68630:function(H,s,t){t.r(s);var x=t(48305),c=t.n(x),j=t(86464),l=t(50959),O=t(73552),d=t(11527),g=function(){var m=(0,l.useRef)(null),D=(0,l.useState)(O.v),I=c()(D,2),e=I[0],K=I[1],w=function(J,se,ce,fe){console.log("change type:",ce),console.log("targetNode:",fe),console.log("oldData:",se),K(J)},Z=function(){m.addFile()},ue=function(){m.addFolder()};return(0,d.jsxs)("div",{style:{border:"1px solid #ccc"},children:[(0,d.jsx)("button",{onClick:Z,children:"add file"}),(0,d.jsx)("button",{onClick:ue,children:"add folder"}),(0,d.jsx)(j.Z,{fileExplorerRef:m,data:e,enableDrag:!0,onChange:w,onSelect:function(J){return console.log(J)},rootId:0,enableSelect:!0,showActions:!0,initialOpen:!0})]})};s.default=g},21813:function(H,s,t){t.r(s);var x=t(48305),c=t.n(x),j=t(86464),l=t(50959),O=t(73552),d=t(11527),g=function(){var m=(0,l.useState)(null),D=c()(m,2),I=D[0],e=D[1];return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:["Selected: ",I==null?void 0:I.text]}),(0,d.jsx)(j.Z,{data:O.v,rootId:0,initialOpen:!0,onSelect:function(w){return e(w)}})]})};s.default=g},86464:function(H,s,t){t.d(s,{Z:function(){return Ie}});var x=t(26068),c=t.n(x),j=t(15558),l=t.n(j),O=t(48305),d=t.n(O),g=t(3064),f=t(50959),m=t(4690),D=t(67825),I=t.n(D),e=t(11527),K=["style","name"],w=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m320 512V448h64v128h128v64H544v128h-64V640H352v-64z"})})},Z=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m384 416V416h64v128h128v64H544v128h-64V608H352v-64z"})})},ue=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"delete",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})})},G=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"edit",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"})})},J=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896"})})},se=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"right",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})})},ce=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})})},fe=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32"})})},De={file:(0,e.jsx)(ce,{}),folder:(0,e.jsx)(fe,{}),addFile:(0,e.jsx)(w,{}),addFolder:(0,e.jsx)(Z,{}),delete:(0,e.jsx)(ue,{}),edit:(0,e.jsx)(G,{}),folderOpen:(0,e.jsx)(J,{}),right:(0,e.jsx)(se,{})},L=function(n){var o=n.style,r=n.name,a=I()(n,K);return(0,e.jsx)("span",c()(c()({},a),{},{style:c()({display:"flex",alignItems:"center"},o),children:De[r]}))},Ce=function(n){var o=n.text,r=n.onChange,a=n.onCancel,v=(0,f.useRef)(null),b=(0,f.useState)(o),S=d()(b,2),M=S[0],F=S[1],z=function(h){F(h.target.value)},B=function(){if(M===""&&o===""){a(!0);return}if(M===o||M.trim()===""){a();return}r(M,o==="")},U=function(){if(o===""||o===void 0){a(!0);return}F(o),a()},C=function(h){h.key==="Enter"?(h.preventDefault(),B()):h.key==="Escape"&&(h.preventDefault(),U())};return(0,f.useEffect)(function(){var _;v==null||(_=v.current)===null||_===void 0||_.focus()},[]),(0,e.jsx)("div",{className:"inputWrapper file-explorer__node-actions",children:(0,e.jsx)("input",{ref:v,className:"textField  nodeInput",value:M,onChange:z,onBlur:B,onKeyDown:C})})},Se=function(n){var o=_toConsumableArray(n).sort(function(r,a){return r.id<a.id?1:r.id>a.id?-1:0});return o.length>0?o[0].id:0},Ae=function(n,o){var r;return n.forEach(function(a){var v=o.find(function(b){return b.id===a.id});if(a.pid!==(v==null?void 0:v.pid))return r=a,null}),r},Q="_draft_id_",je=function(n){var o=n.dragOverAutoExpand,r=n.clickRowAutoExpand,a=n.isSelected,v=n.showIcon,b=n.isOpen,S=b===void 0?!1:b,M=n.showActions,F=M===void 0?!0:M,z=n.titleRender,B=n.switcherIcon,U=n.node,C=U.id,_=U.droppable,h=U.text,ve=(0,f.useState)(!1),X=d()(ve,2),_e=X[0],N=X[1],he=n.depth*24,ee=(0,f.useState)(!1),ne=d()(ee,2),Y=ne[0],V=ne[1],te=_e||h==="",ae=function(i){i.stopPropagation(),n.onToggle(C)},xe=(0,g.t0)(C,S,n.onToggle),re=o?xe:{},le=function(i){i.stopPropagation(),N(!0)},k=function(i){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(N(!1),P){n.onTextChange("_draft_id_",i);return}n.onTextChange(C,i)},me=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;i&&n.onRemove(C,!0),N(!1)},oe=function(i){i.stopPropagation(),n.onCreate({id:Q,text:"",parent:C,droppable:!1},!0)},q=function(i){i.stopPropagation(),n.onCreate({id:Q,text:"",parent:C,droppable:!0},!0)},pe=function(i){var P;r&&ae(i),(P=n.onSelect)===null||P===void 0||P.call(n,n.node)},Ee=function(i){i.stopPropagation(),n.onRemove(C)},de=function(i){var P=i.name;if(v)return(0,e.jsx)("div",{className:"file-explorer__node-icon","data-name":P,children:_?(0,e.jsx)(L,{name:S?"folderOpen":"folder"}):(0,e.jsx)(L,{name:"file"})})},ge=function(){return(0,e.jsxs)("div",{className:"file-explorer__node-actions",children:[_?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{onClick:oe,children:(0,e.jsx)(L,{name:"addFile"})}),(0,e.jsx)("span",{onClick:q,children:(0,e.jsx)(L,{name:"addFolder"})})]}):null,(0,e.jsx)("span",{onClick:Ee,children:(0,e.jsx)(L,{name:"delete"})}),(0,e.jsx)("span",{onClick:le,children:(0,e.jsx)(L,{name:"edit"})})]})};return(0,f.useEffect)(function(){N(n.showInput||!1)},[n.showInput]),(0,e.jsxs)("div",c()(c()({className:"file-explorer__node ".concat(Y?"file-explorer__node--hover":""," ").concat(a?"file-explorer__node--selected":""),style:{paddingInlineStart:he}},re),{},{onMouseEnter:function(){return V(!0)},onMouseLeave:function(){return V(!1)},onClick:pe,children:[(0,e.jsx)("div",{className:"file-explorer__node-expand-icon-wrapper ".concat(_?"":"disabled"),onClick:ae,children:_&&(0,e.jsx)("div",{className:"file-explorer__node-expand-icon ".concat(S?"isOpen":""),children:B||(0,e.jsx)(L,{name:"right"})})}),(0,e.jsx)(de,{name:h}),(0,e.jsxs)("div",{className:"file-explorer__node-content",children:[te?(0,e.jsx)(Ce,{text:h,onChange:k,onCancel:me}):(0,e.jsx)("span",{className:"file-explorer__node-text",children:z?z(n.node):h}),Y&&!te&&F&&(0,e.jsx)(ge,{})]})]}))},Oe=function(n){var o=n.fileExplorerRef,r=n.data,a=n.onChange,v=n.onSelect,b=n.canDrag,S=n.enableAnimateExpand,M=S===void 0?!0:S,F=n.dragOverAutoExpand,z=F===void 0?!1:F,B=n.clickRowAutoExpand,U=B===void 0?!0:B,C=n.enableSelect,_=C===void 0?!0:C,h=n.showIcon,ve=h===void 0?!0:h,X=n.showActions,_e=X===void 0?!1:X,N=n.enableDrag,he=N===void 0?!1:N,ee=n.initialOpen,ne=ee===void 0?!1:ee,Y=n.rootId,V=Y===void 0?"":Y,te=n.titleRender,ae=n.switcherIcon,xe=(0,f.useState)(r),re=d()(xe,2),le=re[0],k=re[1],me=(0,f.useState)(),oe=d()(me,2),q=oe[0],pe=oe[1],Ee=(0,f.useState)(null),de=d()(Ee,2),ge=de[0],E=de[1],i=function(u){var A=Ae(r,u);a==null||a(u,l()(r),"drop",A)},P=function(u,A){var y=[u].concat(l()((0,g.mD)(r,u).map(function(R){return R.id}))),W=r.filter(function(R){return!y.includes(R.id)});if(A){k(W);return}a==null||a(W,l()(r),"remove",r.find(function(R){return R.id===u}))},ie=function(u,A){var y=[].concat(l()(r),[u]);if(A){k(y);return}a==null||a(y,l()(r),"create",u)},Me=function(u,A){if(u===Q){var y=le.find(function($){return $.id===u});ie(c()(c()({},y),{},{id:"",text:A}));return}var W,R=r.map(function($){return $.id===u?(W=$,c()(c()({},$),{},{text:A})):$});a==null||a(R,l()(r),"update",W)},Pe=function(u){_&&(pe(u),v==null||v(u))};return(0,f.useEffect)(function(){o&&(o.addFile=function(){return ie({id:Q,text:"",parent:V,droppable:!1},!0)},o.addFolder=function(){return ie({id:Q,text:"",parent:V,droppable:!0},!0)},o.remove=function(T){return P(T,!0)},o.edit=function(T){E(T)})},[]),(0,f.useEffect)(function(){k(r)},[r]),(0,e.jsx)(g.WG,{backend:m.PD,children:(0,e.jsx)(g.mp,{tree:le,rootId:V,enableAnimateExpand:M,render:function(u,A){var y=A.depth,W=A.isOpen,R=A.onToggle;return(0,e.jsx)(je,{node:u,depth:y,isOpen:W,showIcon:ve,switcherIcon:ae,isSelected:u.id===(q==null?void 0:q.id),onToggle:R,onSelect:Pe,onRemove:P,onTextChange:Me,onCreate:ie,dragOverAutoExpand:z,clickRowAutoExpand:U,titleRender:te,showActions:_e,showInput:u.id===ge})},onDrop:i,classes:{root:"file-explorer",draggingSource:"file-explorer__draggingSource",dropTarget:"file-explorer__dropTarget"},canDrag:b||function(){return he},initialOpen:ne})})},Ie=Oe}}]);
