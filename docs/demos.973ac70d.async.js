"use strict";(self.webpackChunk_rainetian_file_explorer=self.webpackChunk_rainetian_file_explorer||[]).push([[433],{95294:function(Z,E,t){t.d(E,{v:function(){return b}});var b={"/public/index.html":"","/src/App.tsx":"","/src/main.tsx":"","/src/style.css":"","/package.json":"","/tsconfig.json":""}},6515:function(Z,E,t){t.d(E,{B:function(){return b}});var b=[{id:1,parent:0,droppable:!0,text:"Folder 1"},{id:2,parent:1,droppable:!1,text:"File1"},{id:3,parent:1,droppable:!1,text:"File2"},{id:4,parent:0,droppable:!0,text:"Folder 2"},{id:5,parent:4,droppable:!1,text:"File3"},{id:6,parent:0,droppable:!1,text:"File4"}]},58743:function(Z,E,t){t.r(E);var b=t(48305),C=t.n(b),B=t(88180),h=t(50959),w=t(95294),a=t(11527),W=function(){var s=(0,h.useState)(B.Me.files2tree(w.v)),v=C()(s,2),e=v[0],G=v[1],Q=function(D){G(D)};return(0,a.jsx)("div",{style:{width:250,border:"1px solid #ccc",padding:12},children:(0,a.jsx)(B.ZP,{data:e,rootId:0,onChange:Q,initialOpen:!0})})};E.default=W},92048:function(Z,E,t){t.r(E);var b=t(88180),C=t(50959),B=t(6515),h=t(11527),w=function(){var W=function(s){var v=s.node;return(0,h.jsxs)("span",{style:{color:"blue"},children:["#",v.text,"\u{1F60E}"]})};return(0,h.jsx)(b.ZP,{data:B.B,rootId:0,titleRender:function(s){return(0,h.jsx)(W,{node:s})},switcherIcon:(0,h.jsx)("span",{children:"\u25B6\uFE0F"}),fileIcon:!1})};E.default=w},54428:function(Z,E,t){t.r(E);var b=t(88180),C=t(50959),B=t(6515),h=t(11527),w=function(){return(0,h.jsx)(b.ZP,{data:B.B,rootId:0,canDrag:function(){return!1},initialOpen:!0,enableSelect:!1})};E.default=w},42264:function(Z,E,t){t.r(E);var b=t(48305),C=t.n(b),B=t(88180),h=t(50959),w=t(6515),a=t(11527),W=function(){var s=(0,h.useRef)(null),v=(0,h.useState)(w.B),e=C()(v,2),G=e[0],Q=e[1],X=function(l,V){var te=V.action,Y=V.oldTree,re=V.oldNode,le=V.newNode;console.log(te,Y,re,le),Q(l)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,a.jsx)("button",{onClick:function(){var l;return(l=s.current)===null||l===void 0?void 0:l.addFile()},children:"add file"}),(0,a.jsx)("button",{onClick:function(){var l;return(l=s.current)===null||l===void 0?void 0:l.addFolder()},children:"add folder"}),(0,a.jsx)("button",{onClick:function(){var l;return(l=s.current)===null||l===void 0?void 0:l.closeAll()},children:"closeAll"}),(0,a.jsx)("button",{onClick:function(){var l;return(l=s.current)===null||l===void 0?void 0:l.openAll()},children:"openAll"}),(0,a.jsx)("button",{onClick:function(){var l;return console.log((l=s.current)===null||l===void 0?void 0:l.getFiles())},children:"getFiles"}),(0,a.jsx)("button",{onClick:function(){var l;return console.log((l=s.current)===null||l===void 0?void 0:l.getData())},children:"getData"}),(0,a.jsx)("button",{onClick:function(){var l;return(l=s.current)===null||l===void 0?void 0:l.edit(2)},children:"edit File1"}),(0,a.jsx)("button",{onClick:function(){var l;return(l=s.current)===null||l===void 0?void 0:l.remove(3,!1)},children:"remove File2"})]}),(0,a.jsx)("div",{style:{width:300,border:"1px solid #ccc"},children:(0,a.jsx)(B.ZP,{fileExplorerRef:s,data:G,onChange:X,onSelect:function(l){return console.log(l)},rootId:0,showActions:!0,initialOpen:!0})})]})};E.default=W},86226:function(Z,E,t){t.r(E);var b=t(31759),C=t.n(b),B=t(26068),h=t.n(B),w=t(48305),a=t.n(w),W=t(88180),$=t(69225),s=t(50959),v=t(95294),e=t(11527),G=function(){var X=(0,s.useState)(W.Me.files2tree(v.v)),D=a()(X,2),l=D[0],V=D[1],te=(0,s.useState)(null),Y=a()(te,2),re=Y[0],le=Y[1],Ce=(0,$.Z)({initialOpen:!1,clickRowAutoExpand:!0,dragOverAutoExpand:!1,enableSelect:!0,showActions:!0,fileIcon:!0,allowRepeatText:!1}),S=a()(Ce,2),L=S[0],K=S[1],se=function(u){V(u)},fe=function(u){var je={js:"https://img.icons8.com/color/48/000000/javascript.png",css:"https://img.icons8.com/color/48/000000/css3.png",html:"https://img.icons8.com/color/48/000000/html-5.png",json:"https://img.icons8.com/color/48/000000/json.png",tsx:"https://img.icons8.com/color/48/000000/typescript.png"},_e=je[u];return _e?(0,e.jsx)("img",{src:_e}):null};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsx)("div",{style:{width:250,border:"1px solid #ccc",padding:12,flexShrink:0},children:(0,e.jsx)(W.ZP,h()({data:l,rootId:0,onChange:se,onSelect:function(u){return le(u)}},L))}),(0,e.jsxs)("div",{style:{border:"1px solid #ccc",padding:12,width:"100%"},children:[(0,e.jsxs)("p",{children:["\u9ED8\u8BA4\u5168\u90E8\u5C55\u5F00\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:L.initialOpen,onChange:function(u){return K({initialOpen:u.target.checked})}}),"initialOpen"]})]}),(0,e.jsxs)("p",{children:["\u70B9\u51FB\u884C\u65F6\u662F\u5426\u81EA\u52A8\u5C55\u5F00\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:L.clickRowAutoExpand,onChange:function(u){return K({clickRowAutoExpand:u.target.checked})}}),"clickRowAutoExpand"]})]}),(0,e.jsxs)("p",{children:["\u62D6\u62FD\u5230\u6587\u4EF6\u5939\u4E0A\u662F\u5426\u81EA\u52A8\u5C55\u5F00\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:L.dragOverAutoExpand,onChange:function(u){return K({dragOverAutoExpand:u.target.checked})}}),"dragOverAutoExpand"]})]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5141\u8BB8\u9009\u4E2D\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:L.enableSelect,onChange:function(u){return K({enableSelect:u.target.checked})}}),"enableSelect"]})]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5C55\u793A\u64CD\u4F5C\u6309\u94AE\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:L.showActions,onChange:function(u){return K({showActions:u.target.checked})}}),"showActions"]})]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5C55\u793A\u64CD\u4F5C\u6309\u94AE\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:typeof L.fileIcon=="boolean"&&L.fileIcon,onChange:function(u){return K({fileIcon:u.target.checked})}}),"fileIcon"]})]}),(0,e.jsxs)("p",{children:["\u9009\u4E2D\u7684\u8282\u70B9\uFF1A",JSON.stringify(re||"")]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5141\u8BB8\u91CD\u590D\u540D\u79F0\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:L.allowRepeatText,onChange:function(u){return K({allowRepeatText:u.target.checked})}}),"allowRepeatText"]})]}),(0,e.jsxs)("p",{children:["\u81EA\u5B9A\u4E49\u6587\u4EF6\u56FE\u6807\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:typeof L.fileIcon=="function",onChange:function(u){u.target.checked?(console.log(C()(fe)),K({fileIcon:fe})):K({fileIcon:!0})}}),"\u56FE\u6807"]})]})]})]})})};E.default=G},88180:function(Z,E,t){t.d(E,{ZP:function(){return ye},Me:function(){return Te}});var b=t(26068),C=t.n(b),B=t(15558),h=t.n(B),w=t(48305),a=t.n(w),W=t(67825),$=t.n(W),s=t(28724),v=t(50959),e=t(11527),G=["style","name"],Q=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m320 512V448h64v128h128v64H544v128h-64V640H352v-64z"})})},X=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m384 416V416h64v128h128v64H544v128h-64V608H352v-64z"})})},D=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"delete",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})})},l=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"edit",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"})})},V=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896"})})},te=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"right",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})})},Y=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})})},re=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32"})})},le=function(){return(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",focusable:"false",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M474.88 680.96c20.48-20.48 53.76-20.48 74.24 0l254.6688 253.5936c20.5312 20.48 20.5312 53.6064 0 74.0864-20.48 20.48-53.76 20.48-74.24 0L512 792.1152l-217.5488 216.576c-20.48 20.4288-53.76 20.4288-74.24 0-20.5312-20.48-20.5312-53.7088 0-74.1376zM294.4 15.36L512 231.8848l217.5488-216.576c20.48-20.4288 53.76-20.4288 74.24 0 20.5312 20.48 20.5312 53.7088 0 74.1376L549.12 343.04c-20.48 20.48-53.76 20.48-74.24 0L220.16 89.4464C199.68 68.9664 199.68 35.84 220.16 15.36c20.48-20.48 53.76-20.48 74.24 0z"})})},Ce={file:(0,e.jsx)(Y,{}),folder:(0,e.jsx)(re,{}),addFile:(0,e.jsx)(Q,{}),addFolder:(0,e.jsx)(X,{}),delete:(0,e.jsx)(D,{}),edit:(0,e.jsx)(l,{}),folderOpen:(0,e.jsx)(V,{}),right:(0,e.jsx)(te,{}),collapse:(0,e.jsx)(le,{})},S=function(n){var i=n.style,p=n.name,d=$()(n,G);return(0,e.jsx)("span",C()(C()({},d),{},{style:C()({display:"flex",alignItems:"center"},i),children:Ce[p]}))},L=function(n){var i=n.text,p=n.onChange,d=n.onCancel,r=(0,v.useRef)(null),m=(0,v.useState)(i),f=a()(m,2),F=f[0],k=f[1],H=function(I){k(I.target.value)},y=function(){if(F===""&&i===""){d(!0);return}if(F===i||F.trim()===""){d();return}p(F,i==="")},J=function(){if(i===""||i===void 0){d(!0);return}k(i),d()},N=function(I){I.key==="Enter"?(I.preventDefault(),y()):I.key==="Escape"&&(I.preventDefault(),J())};return(0,v.useEffect)(function(){var j;r==null||(j=r.current)===null||j===void 0||j.focus()},[]),(0,e.jsx)("div",{className:"inputWrapper file-explorer__node-actions",onClick:function(I){return I.stopPropagation()},children:(0,e.jsx)("input",{ref:r,className:"textField  nodeInput",value:F,onChange:H,onBlur:y,onKeyDown:N})})};function K(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var n=Math.random()*16|0,i=x==="x"?n:n&3|8;return i.toString(16)}).replace(/-/g,"")}var se=function(n,i){var p;return n.forEach(function(d){var r=i.find(function(m){return m.id===d.id});if(d.parent!==(r==null?void 0:r.parent))return p=d,null}),p};function fe(x){var n=[],i={};for(var p in x){for(var d=p.startsWith("/")?p.slice(1).split("/"):p.split("/"),r=0,m=0;m<d.length-1;m++){var f=d.slice(0,m+1).join("/");if(!i[f]){var F=n.length+1;i[f]=F,n.push({id:F,parent:r,droppable:!0,text:d[m]})}r=i[f]}var k=d.pop(),H=n.length+1;n.push({id:H,parent:r,droppable:!1,text:k,content:x[p]})}return n}function T(x){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i={};return x.forEach(function(p){if(!p.droppable){for(var d="",r=p.parent;r!==n;){var m=x.find(function(f){return f.id===r});d=m.text+"/"+d,r=m.parent}d===""?d=p.text:d+=p.text,i[d]=p.content}}),i}var u="_draft_id_",je=function(n){var i=n.dragOverAutoExpand,p=n.clickRowAutoExpand,d=n.isSelected,r=n.isOpen,m=r===void 0?!1:r,f=n.showActions,F=f===void 0?!0:f,k=n.titleRender,H=n.switcherIcon,y=n.fileIcon,J=n.node,N=J.id,j=J.droppable,I=J.text,Ae=(0,v.useState)(!1),oe=a()(Ae,2),ae=oe[0],q=oe[1],De=n.depth*24,Ie=(0,v.useState)(!1),ve=a()(Ie,2),ee=ve[0],he=ve[1],xe=ae||I==="",ie=function(_){_.stopPropagation(),n.onToggle(N)},ne=(0,s.t0)(N,m,n.onToggle),de=i?ne:{},Oe=function(_){_.stopPropagation(),q(!0)},pe=function(_){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(q(!1),R){n.onTextChange("_draft_id_",_);return}n.onTextChange(N,_)},ue=function(){var _,R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R&&n.onRemove(N,!0),q(!1),(_=n.onCancelInput)===null||_===void 0||_.call(n)},me=function(_){_.stopPropagation(),n.onCreate({id:u,text:"",parent:N,droppable:!1},!0)},be=function(_){_.stopPropagation(),n.onCreate({id:u,text:"",parent:N,droppable:!0},!0)},ge=function(_){var R;p&&ie(_),(R=n.onSelect)===null||R===void 0||R.call(n,n.node)},Re=function(_){_.stopPropagation(),n.onRemove(N)},Ee=function(_){var R=_.name;if(typeof y=="boolean"&&!y)return(0,e.jsx)("div",{style:{marginLeft:-4}});if(y===void 0||y===!0)return(0,e.jsx)("div",{className:"file-explorer__node-icon","data-name":R,children:j?(0,e.jsx)(S,{name:m?"folderOpen":"folder"}):(0,e.jsx)(S,{name:"file"})});var Fe=y("folderOpen")||(0,e.jsx)(S,{name:"folderOpen"}),M=y("folder")||(0,e.jsx)(S,{name:"folder"}),o=y((R==null?void 0:R.split(".").pop())||"file")||(0,e.jsx)(S,{name:"file"});return(0,e.jsx)("div",{className:"file-explorer__node-icon","data-name":R,children:j?m?Fe:M:o})},Me=function(){return(0,e.jsxs)("div",{className:"file-explorer__node-actions",children:[j?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{onClick:me,title:"Add file",children:(0,e.jsx)(S,{name:"addFile"})}),(0,e.jsx)("span",{onClick:be,title:"Add folder",children:(0,e.jsx)(S,{name:"addFolder"})})]}):null,(0,e.jsx)("span",{onClick:Re,title:"Remove",children:(0,e.jsx)(S,{name:"delete"})}),(0,e.jsx)("span",{onClick:Oe,title:"Edit",children:(0,e.jsx)(S,{name:"edit"})})]})},ce=function(){var _=H&&typeof H=="function";return(0,e.jsx)("div",{className:"file-explorer__node-expand-icon-wrapper ".concat(j?"":"disabled"),onClick:ie,children:j&&(_?H(m):(0,e.jsx)("div",{className:"file-explorer__node-expand-icon ".concat(m?"isOpen":""),children:H||(0,e.jsx)(S,{name:"right"})}))})};return(0,v.useEffect)(function(){q(n.showInput||!1)},[n.showInput]),(0,e.jsxs)("div",C()(C()({className:"file-explorer__node ".concat(ee?"file-explorer__node--hover":""," ").concat(d?"file-explorer__node--selected":""),style:{paddingInlineStart:De}},de),{},{onMouseEnter:function(){return he(!0)},onMouseLeave:function(){return he(!1)},onClick:ge,children:[ce(),Ee({name:I}),(0,e.jsxs)("div",{className:"file-explorer__node-content",children:[xe?(0,e.jsx)(L,{text:I,onChange:pe,onCancel:ue}):(0,e.jsx)("span",{className:"file-explorer__node-text",children:k?k(n.node):I}),ee&&!xe&&F&&Me()]})]}))},_e=["fileExplorerRef","rootId","data","onDrop","onChange","onSelect","dragOverAutoExpand","clickRowAutoExpand","enableSelect","showActions","allowRepeatText","titleRender","switcherIcon","fileIcon","theme","selectedId"],Se=function(n){var i=(0,v.useRef)(null),p=n.fileExplorerRef,d=n.rootId,r=n.data,m=n.onDrop,f=n.onChange,F=n.onSelect,k=n.dragOverAutoExpand,H=k===void 0?!1:k,y=n.clickRowAutoExpand,J=y===void 0?!0:y,N=n.enableSelect,j=N===void 0?!0:N,I=n.showActions,Ae=I===void 0?!1:I,oe=n.allowRepeatText,ae=oe===void 0?!0:oe,q=n.titleRender,De=n.switcherIcon,Ie=n.fileIcon,ve=n.theme,ee=n.selectedId,he=$()(n,_e),xe=(0,v.useState)(r),ie=a()(xe,2),ne=ie[0],de=ie[1],Oe=(0,v.useState)(),pe=a()(Oe,2),ue=pe[0],me=pe[1],be=(0,v.useState)(null),ge=a()(be,2),Re=ge[0],Ee=ge[1],Me=function(o,g){m==null||m(o,g);var c=se(r,o),P=se(o,r);if(!ae){var z=r.find(function(O){return O.parent===P.parent&&O.text===c.text&&O.droppable===c.droppable});if(z)return}f==null||f(o,{action:"drop",oldTree:h()(r),oldNode:c})},ce=function(o,g){var c=[o].concat(h()((0,s.mD)(r,o).map(function(O){return O.id}))),P=r.filter(function(O){return!c.includes(O.id)});if(g){de(P);return}var z=r.find(function(O){return O.id===o});f==null||f(P,{action:"remove",oldTree:h()(r),oldNode:z})},A=function(o,g){var c=[].concat(h()(r),[o]);if(g){de(c);return}if(!ae){var P=r.find(function(O){return O.parent===o.parent&&O.text===o.text&&O.droppable===o.droppable});if(P){ce(o.id,!0);return}}var z=C()(C()({},o),{},{id:K()});c=[].concat(h()(r),[z]),f==null||f(c,{action:"create",oldTree:h()(r),newNode:z})},_=function(o,g){if(o===u){var c=ne.find(function(U){return U.id===o});A(C()(C()({},c),{},{id:"",text:g}));return}if(!ae){var P=r.find(function(U){return U.id===o}),z=r.find(function(U){return U.parent===P.parent&&U.text===g&&U.droppable===P.droppable});if(z)return}var O,Pe=r.map(function(U){return U.id===o?(O=U,C()(C()({},U),{},{text:g})):U});f==null||f(Pe,{action:"update",oldTree:h()(r),oldNode:O})},R=function(o){j&&(me(o),F==null||F(o))},Fe=function(){Ee(null)};return(0,v.useImperativeHandle)(p,function(){var M,o;return{addFile:function(){return A({id:u,text:"",parent:d,droppable:!1},!0)},addFolder:function(){return A({id:u,text:"",parent:d,droppable:!0},!0)},remove:function(c){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return ce(c,P)},edit:function(c){Ee(c)},getFiles:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return T(ne,c)},getData:function(){return ne},openAll:function(){var c;return(c=i.current)===null||c===void 0?void 0:c.openAll()},closeAll:function(){var c;return(c=i.current)===null||c===void 0?void 0:c.closeAll()},open:(M=i.current)===null||M===void 0?void 0:M.open,close:(o=i.current)===null||o===void 0?void 0:o.close}}),(0,v.useEffect)(function(){de(r)},[r]),(0,v.useEffect)(function(){if(r&&ee!==void 0){var M=r.find(function(o){return o.id===ee});M&&j&&me(M)}},[ee]),(0,e.jsx)("div",{"data-id":"file-explorer","data-theme":ve,children:(0,e.jsx)(s.WG,{backend:s.PD,children:(0,e.jsx)(s.mp,C()({ref:i,tree:ne,rootId:d,render:function(o,g){var c=g.depth,P=g.isOpen,z=g.onToggle;return(0,e.jsx)(je,{node:o,depth:c,isOpen:P,switcherIcon:De,isSelected:o.id===(ue==null?void 0:ue.id),onToggle:z,onSelect:R,onRemove:ce,onTextChange:_,onCreate:A,onCancelInput:Fe,dragOverAutoExpand:H,clickRowAutoExpand:J,titleRender:q,showActions:Ae,showInput:o.id===Re,fileIcon:Ie})},onDrop:Me,classes:{root:"file-explorer",draggingSource:"file-explorer__draggingSource",dropTarget:"file-explorer__dropTarget"}},he))})})},Te={files2tree:fe,tree2files:T},ye=Se}}]);
