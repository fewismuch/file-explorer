"use strict";(self.webpackChunk_rainetian_file_explorer=self.webpackChunk_rainetian_file_explorer||[]).push([[433],{95294:function(J,f,n){n.d(f,{v:function(){return j}});var j={"/public/index.html":"","/src/App.tsx":"","/src/main.tsx":"","/src/style.css":"","/package.json":"","/tsconfig.json":""}},6515:function(J,f,n){n.d(f,{B:function(){return j}});var j=[{id:1,parent:0,droppable:!0,text:"Folder 1"},{id:2,parent:1,droppable:!1,text:"File1"},{id:3,parent:1,droppable:!1,text:"File2"},{id:4,parent:0,droppable:!0,text:"Folder 2"},{id:5,parent:4,droppable:!1,text:"File3"},{id:6,parent:0,droppable:!1,text:"File4"}]},49176:function(J,f,n){n.r(f);var j=n(48305),x=n.n(j),M=n(74053),p=n(50959),R=n(6515),o=n(11527),P=function(){var d=(0,p.useState)(R.B),c=x()(d,2),e=c[0],N=c[1],k=function(m){N(m)};return(0,o.jsx)("div",{style:{width:250,border:"1px solid #ccc",padding:12},children:(0,o.jsx)(M.ZP,{data:e,rootId:0,onChange:k,initialOpen:!0,showActions:!0,actions:function(m){return(0,o.jsxs)("span",{onClick:function($){return $.stopPropagation()},children:[(0,o.jsx)("button",{onClick:function(){return console.log(m)},children:"+"}),(0,o.jsx)("button",{onClick:function(){return console.log(m)},children:"-"})]})}})})};f.default=P},58743:function(J,f,n){n.r(f);var j=n(48305),x=n.n(j),M=n(74053),p=n(50959),R=n(95294),o=n(11527),P=function(){var d=(0,p.useState)(M.Me.files2tree(R.v)),c=x()(d,2),e=c[0],N=c[1],k=function(m){N(m)};return(0,o.jsx)("div",{style:{width:250,border:"1px solid #ccc",padding:12},children:(0,o.jsx)(M.ZP,{data:e,rootId:0,onChange:k,initialOpen:!0})})};f.default=P},92048:function(J,f,n){n.r(f);var j=n(74053),x=n(50959),M=n(6515),p=n(11527),R=function(){var P=function(d){var c=d.node;return(0,p.jsxs)("span",{style:{color:"blue"},children:["#",c.text,"\u{1F60E}"]})};return(0,p.jsx)(j.ZP,{data:M.B,rootId:0,titleRender:function(d){return(0,p.jsx)(P,{node:d})},switcherIcon:(0,p.jsx)("span",{children:"\u25B6\uFE0F"}),fileIcon:!1})};f.default=R},54428:function(J,f,n){n.r(f);var j=n(74053),x=n(50959),M=n(6515),p=n(11527),R=function(){return(0,p.jsx)(j.ZP,{data:M.B,rootId:0,canDrag:function(){return!1},initialOpen:!0,enableSelect:!1})};f.default=R},42264:function(J,f,n){n.r(f);var j=n(48305),x=n.n(j),M=n(74053),p=n(50959),R=n(6515),o=n(11527),P=function(){var d=(0,p.useRef)(null),c=(0,p.useState)(R.B),e=x()(c,2),N=e[0],k=e[1],Q=function(r,$){var re=$.action,q=$.oldTree,le=$.oldNode,oe=$.newNode;console.log(re,q,le,oe),k(r)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:8},children:[(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.addFile()},children:"add file"}),(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.addFolder()},children:"add folder"}),(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.closeAll()},children:"closeAll"}),(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.openAll()},children:"openAll"}),(0,o.jsx)("button",{onClick:function(){var r;return console.log((r=d.current)===null||r===void 0?void 0:r.getFiles())},children:"getFiles"}),(0,o.jsx)("button",{onClick:function(){var r;return console.log((r=d.current)===null||r===void 0?void 0:r.getData())},children:"getData"}),(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.edit(2)},children:"edit File1"}),(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.remove(3,!1)},children:"remove File2"}),(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.open(1)},children:"open Folder1"}),(0,o.jsx)("button",{onClick:function(){var r;return(r=d.current)===null||r===void 0?void 0:r.close(1)},children:"close Folder1"})]}),(0,o.jsx)("div",{style:{width:300,border:"1px solid #ccc"},children:(0,o.jsx)(M.ZP,{fileExplorerRef:d,data:N,onChange:Q,onSelect:function(r){return console.log(r)},rootId:0,showActions:!0,initialOpen:!0})})]})};f.default=P},86226:function(J,f,n){n.r(f);var j=n(31759),x=n.n(j),M=n(26068),p=n.n(M),R=n(48305),o=n.n(R),P=n(74053),H=n(69225),d=n(50959),c=n(95294),e=n(11527),N=function(){var Q=(0,d.useState)(P.Me.files2tree(c.v)),m=o()(Q,2),r=m[0],$=m[1],re=(0,d.useState)(null),q=o()(re,2),le=q[0],oe=q[1],je=(0,H.Z)({initialOpen:!1,clickRowAutoExpand:!0,dragOverAutoExpand:!1,enableSelect:!0,showActions:!0,fileIcon:!0,allowRepeatText:!1}),B=o()(je,2),W=B[0],w=B[1],de=function(_){$(_)},ue=function(_){var Ae={js:"https://img.icons8.com/color/48/000000/javascript.png",css:"https://img.icons8.com/color/48/000000/css3.png",html:"https://img.icons8.com/color/48/000000/html-5.png",json:"https://img.icons8.com/color/48/000000/json.png",tsx:"https://img.icons8.com/color/48/000000/typescript.png"},ce=Ae[_];return ce?(0,e.jsx)("img",{src:ce}):null};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsx)("div",{style:{width:250,border:"1px solid #ccc",padding:12,flexShrink:0},children:(0,e.jsx)(P.ZP,p()({data:r,rootId:0,onChange:de,onSelect:function(_){return oe(_)}},W))}),(0,e.jsxs)("div",{style:{border:"1px solid #ccc",padding:12,width:"100%"},children:[(0,e.jsxs)("p",{children:["\u9ED8\u8BA4\u5168\u90E8\u5C55\u5F00\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:W.initialOpen,onChange:function(_){return w({initialOpen:_.target.checked})}}),"initialOpen"]})]}),(0,e.jsxs)("p",{children:["\u70B9\u51FB\u884C\u65F6\u662F\u5426\u81EA\u52A8\u5C55\u5F00\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:W.clickRowAutoExpand,onChange:function(_){return w({clickRowAutoExpand:_.target.checked})}}),"clickRowAutoExpand"]})]}),(0,e.jsxs)("p",{children:["\u62D6\u62FD\u5230\u6587\u4EF6\u5939\u4E0A\u662F\u5426\u81EA\u52A8\u5C55\u5F00\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:W.dragOverAutoExpand,onChange:function(_){return w({dragOverAutoExpand:_.target.checked})}}),"dragOverAutoExpand"]})]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5141\u8BB8\u9009\u4E2D\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:W.enableSelect,onChange:function(_){return w({enableSelect:_.target.checked})}}),"enableSelect"]})]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5C55\u793A\u64CD\u4F5C\u6309\u94AE\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:W.showActions,onChange:function(_){return w({showActions:_.target.checked})}}),"showActions"]})]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5C55\u793A\u64CD\u4F5C\u6309\u94AE\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:typeof W.fileIcon=="boolean"&&W.fileIcon,onChange:function(_){return w({fileIcon:_.target.checked})}}),"fileIcon"]})]}),(0,e.jsxs)("p",{children:["\u9009\u4E2D\u7684\u8282\u70B9\uFF1A",JSON.stringify(le||"")]}),(0,e.jsxs)("p",{children:["\u662F\u5426\u5141\u8BB8\u91CD\u590D\u540D\u79F0\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:W.allowRepeatText,onChange:function(_){return w({allowRepeatText:_.target.checked})}}),"allowRepeatText"]})]}),(0,e.jsxs)("p",{children:["\u81EA\u5B9A\u4E49\u6587\u4EF6\u56FE\u6807\uFF1A",(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"checkbox",checked:typeof W.fileIcon=="function",onChange:function(_){_.target.checked?(console.log(x()(ue)),w({fileIcon:ue})):w({fileIcon:!0})}}),"\u56FE\u6807"]})]})]})]})})};f.default=N},12434:function(J,f,n){n.r(f);var j=n(48305),x=n.n(j),M=n(74053),p=n(50959),R=n(6515),o=n(11527),P=function(){var d=(0,p.useState)(R.B),c=x()(d,2),e=c[0],N=c[1],k=function(m){N(m)};return(0,o.jsx)("div",{style:{width:250,border:"1px solid #ccc",padding:12},children:(0,o.jsx)(M.ZP,{data:e,rootId:0,onChange:k,initialOpen:!0,enableSort:!1})})};f.default=P},74053:function(J,f,n){n.d(f,{ZP:function(){return Ue},Me:function(){return Le}});var j=n(26068),x=n.n(j),M=n(15558),p=n.n(M),R=n(48305),o=n.n(R),P=n(67825),H=n.n(P),d=n(28724),c=n(50959),e=n(11527),N=["style","name"],k=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m320 512V448h64v128h128v64H544v128h-64V640H352v-64z"})})},Q=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32m384 416V416h64v128h128v64H544v128h-64V608H352v-64z"})})},m=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"delete",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})})},r=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"edit",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336zm384 254.272v-64h448v64h-448z"})})},$=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16l96-384zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896"})})},re=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"right",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})})},q=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})})},le=function(){return(0,e.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"file-text",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M128 192v640h768V320H485.76L357.504 192zm-32-64h287.872l128.384 128H928a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32"})})},oe=function(){return(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",focusable:"false",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,e.jsx)("path",{fill:"currentColor",d:"M474.88 680.96c20.48-20.48 53.76-20.48 74.24 0l254.6688 253.5936c20.5312 20.48 20.5312 53.6064 0 74.0864-20.48 20.48-53.76 20.48-74.24 0L512 792.1152l-217.5488 216.576c-20.48 20.4288-53.76 20.4288-74.24 0-20.5312-20.48-20.5312-53.7088 0-74.1376zM294.4 15.36L512 231.8848l217.5488-216.576c20.48-20.4288 53.76-20.4288 74.24 0 20.5312 20.48 20.5312 53.7088 0 74.1376L549.12 343.04c-20.48 20.48-53.76 20.48-74.24 0L220.16 89.4464C199.68 68.9664 199.68 35.84 220.16 15.36c20.48-20.48 53.76-20.48 74.24 0z"})})},je={file:(0,e.jsx)(q,{}),folder:(0,e.jsx)(le,{}),addFile:(0,e.jsx)(k,{}),addFolder:(0,e.jsx)(Q,{}),delete:(0,e.jsx)(m,{}),edit:(0,e.jsx)(r,{}),folderOpen:(0,e.jsx)($,{}),right:(0,e.jsx)(re,{}),collapse:(0,e.jsx)(oe,{})},B=function(t){var u=t.style,C=t.name,s=H()(t,N);return(0,e.jsx)("span",x()(x()({},s),{},{style:x()({display:"flex",alignItems:"center"},u),children:je[C]}))},W=function(t){var u=t.text,C=t.onChange,s=t.onCancel,l=(0,c.useRef)(null),D=(0,c.useState)(u),E=o()(D,2),y=E[0],z=E[1],V=function(O){z(O.target.value)},U=function(){if(y===""&&u===""){s(!0);return}if(y===u||y.trim()===""){s();return}C(y,u==="")},ee=function(){if(u===""||u===void 0){s(!0);return}z(u),s()},X=function(O){O.key==="Enter"?(O.preventDefault(),U()):O.key==="Escape"&&(O.preventDefault(),ee())};return(0,c.useEffect)(function(){var A;l==null||(A=l.current)===null||A===void 0||A.focus()},[]),(0,e.jsx)("div",{className:"file-explorer__inputWrapper file-explorer__node-actions",onClick:function(O){return O.stopPropagation()},children:(0,e.jsx)("input",{ref:l,className:"textField  nodeInput",value:y,onChange:V,onBlur:U,onKeyDown:X})})};function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(g){var t=Math.random()*16|0,u=g==="x"?t:t&3|8;return u.toString(16)}).replace(/-/g,"")}var de=function(t,u){var C;return t.forEach(function(s){var l=u.find(function(D){return D.id===s.id});if(s.parent!==(l==null?void 0:l.parent))return C=s,null}),C};function ue(g){var t=[],u={};for(var C in g){for(var s=C.startsWith("/")?C.slice(1).split("/"):C.split("/"),l=0,D=0;D<s.length-1;D++){var E=s.slice(0,D+1).join("/");if(!u[E]){var y=t.length+1;u[E]=y,t.push({id:y,parent:l,droppable:!0,text:s[D]})}l=u[E]}var z=s.pop(),V=t.length+1;t.push({id:V,parent:l,droppable:!1,text:z,content:g[C]})}return t}function L(g){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u={};return g.forEach(function(C){if(!C.droppable){for(var s="",l=C.parent;l!==t;){var D=g.find(function(E){return E.id===l});s=D.text+"/"+s,l=D.parent}s===""?s=C.text:s+=C.text,u[s]=C.content}}),u}var _="_draft_id_",Ae=function(t){var u=t.dragOverAutoExpand,C=t.clickRowAutoExpand,s=t.isSelected,l=t.isOpen,D=l===void 0?!1:l,E=t.showActions,y=E===void 0?!0:E,z=t.titleRender,V=t.switcherIcon,U=t.fileIcon,ee=t.actions,X=t.node,A=X.id,O=X.droppable,Z=X.text,se=(0,c.useState)(!1),_e=o()(se,2),fe=_e[0],Y=_e[1],Ie=t.depth*24,Oe=(0,c.useState)(!1),ve=o()(Oe,2),he=ve[0],xe=ve[1],ne=fe||Z==="",pe=function(v){v.stopPropagation(),t.onToggle(A)},Me=(0,d.t0)(A,D,t.onToggle),me=u?Me:{},te=function(v){v.stopPropagation(),Y(!0)},ae=function(v){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Y(!1),I){t.onTextChange("_draft_id_",v);return}t.onTextChange(A,v)},be=function(){var v,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;I&&t.onRemove(A,!0),Y(!1),(v=t.onCancelInput)===null||v===void 0||v.call(t)},Ee=function(v){v.stopPropagation(),t.onCreate({id:_,text:"",parent:A,droppable:!1},!0)},ie=function(v){v.stopPropagation(),t.onCreate({id:_,text:"",parent:A,droppable:!0},!0)},ge=function(v){var I;C&&pe(v),(I=t.onSelect)===null||I===void 0||I.call(t,t.node)},Re=function(v){v.stopPropagation(),t.onRemove(A)},Ce=function(v){var I=v.name;if(typeof U=="boolean"&&!U)return(0,e.jsx)("div",{style:{marginLeft:-4}});if(U===void 0||U===!0)return(0,e.jsx)("div",{className:"file-explorer__node-icon","data-name":I,children:O?(0,e.jsx)(B,{name:D?"folderOpen":"folder"}):(0,e.jsx)(B,{name:"file"})});var Se=U("folderOpen")||(0,e.jsx)(B,{name:"folderOpen"}),Te=U("folder")||(0,e.jsx)(B,{name:"folder"}),ye=U((I==null?void 0:I.split(".").pop())||"file")||(0,e.jsx)(B,{name:"file"});return(0,e.jsx)("div",{className:"file-explorer__node-icon","data-name":I,children:O?D?Se:Te:ye})},Pe=function(){return(0,e.jsxs)("div",{className:"file-explorer__node-actions",children:[O?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",{onClick:Ee,title:"Add file",children:(0,e.jsx)(B,{name:"addFile"})}),(0,e.jsx)("span",{onClick:ie,title:"Add folder",children:(0,e.jsx)(B,{name:"addFolder"})})]}):null,(0,e.jsx)("span",{onClick:Re,title:"Remove",children:(0,e.jsx)(B,{name:"delete"})}),(0,e.jsx)("span",{onClick:te,title:"Edit",children:(0,e.jsx)(B,{name:"edit"})})]})},De=function(){var v=V&&typeof V=="function";return(0,e.jsx)("div",{className:"file-explorer__node-expand-icon-wrapper ".concat(O?"":"disabled"),onClick:pe,children:O&&(v?V(D):(0,e.jsx)("div",{className:"file-explorer__node-expand-icon ".concat(D?"isOpen":""),children:V||(0,e.jsx)(B,{name:"right",style:{fontSize:12}})}))})};return(0,c.useEffect)(function(){Y(t.showInput||!1)},[t.showInput]),(0,e.jsxs)("div",x()(x()({className:"file-explorer__node ".concat(he?"file-explorer__node--hover":""," ").concat(s?"file-explorer__node--selected":""),style:{paddingInlineStart:Ie}},me),{},{onMouseEnter:function(){return xe(!0)},onMouseLeave:function(){return xe(!1)},onClick:ge,children:[De(),Ce({name:Z}),(0,e.jsxs)("div",{className:"file-explorer__node-content",children:[ne?(0,e.jsx)(W,{text:Z,onChange:ae,onCancel:be}):(0,e.jsx)("span",{className:"file-explorer__node-text",children:z?z(t.node):Z}),he&&!ne&&y&&(ee?ee(t.node):Pe())]})]}))},ce=function(t){var u=(t.depth+1)*24;return(0,e.jsx)("div",{className:"file-explorer__placeholder",style:{left:u}})},Fe=["fileExplorerRef","rootId","data","onDrop","onChange","onSelect","dragOverAutoExpand","clickRowAutoExpand","enableSelect","enableSort","showActions","allowRepeatText","titleRender","actions","switcherIcon","fileIcon","theme","selectedId"],Be=function(t){var u=(0,c.useRef)(null),C=t.fileExplorerRef,s=t.rootId,l=t.data,D=t.onDrop,E=t.onChange,y=t.onSelect,z=t.dragOverAutoExpand,V=z===void 0?!1:z,U=t.clickRowAutoExpand,ee=U===void 0?!0:U,X=t.enableSelect,A=X===void 0?!0:X,O=t.enableSort,Z=O===void 0?!0:O,se=t.showActions,_e=se===void 0?!1:se,fe=t.allowRepeatText,Y=fe===void 0?!0:fe,Ie=t.titleRender,Oe=t.actions,ve=t.switcherIcon,he=t.fileIcon,xe=t.theme,ne=t.selectedId,pe=H()(t,Fe),Me=(0,c.useState)(l),me=o()(Me,2),te=me[0],ae=me[1],be=(0,c.useState)(),Ee=o()(be,2),ie=Ee[0],ge=Ee[1],Re=(0,c.useState)(null),Ce=o()(Re,2),Pe=Ce[0],De=Ce[1],F=function(a,h){D==null||D(a,h);var i=de(l,a),T=de(a,l);if(!Y){var G=l.find(function(b){return b.parent===T.parent&&b.text===i.text&&b.droppable===i.droppable});if(G)return}E==null||E(a,{action:"drop",oldTree:p()(l),oldNode:i})},v=function(a,h){var i=[a].concat(p()((0,d.mD)(l,a).map(function(b){return b.id}))),T=l.filter(function(b){return!i.includes(b.id)});if(h){ae(T);return}var G=l.find(function(b){return b.id===a});E==null||E(T,{action:"remove",oldTree:p()(l),oldNode:G})},I=function(a,h){var i=[].concat(p()(l),[a]);if(h){ae(i);return}if(!Y){var T=l.find(function(b){return b.parent===a.parent&&b.text===a.text&&b.droppable===a.droppable});if(T){v(a.id,!0);return}}var G=x()(x()({},a),{},{id:w()});i=[].concat(p()(l),[G]),E==null||E(i,{action:"create",oldTree:p()(l),newNode:G})},Se=function(a,h){if(a===_){var i=te.find(function(K){return K.id===a});I(x()(x()({},i),{},{id:"",text:h}));return}if(!Y){var T=l.find(function(K){return K.id===a}),G=l.find(function(K){return K.parent===T.parent&&K.text===h&&K.droppable===T.droppable});if(G)return}var b,We=l.map(function(K){return K.id===a?(b=K,x()(x()({},K),{},{text:h})):K});E==null||E(We,{action:"update",oldTree:p()(l),oldNode:b})},Te=function(a){A&&(ge(a),y==null||y(a))},ye=function(){De(null)};return(0,c.useImperativeHandle)(C,function(){var S,a;return{addFile:function(){return I({id:_,text:"",parent:s,droppable:!1},!0)},addFolder:function(){return I({id:_,text:"",parent:s,droppable:!0},!0)},remove:function(i){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return v(i,T)},edit:function(i){De(i)},getFiles:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return L(te,i)},getData:function(){return te},openAll:function(){var i;return(i=u.current)===null||i===void 0?void 0:i.openAll()},closeAll:function(){var i;return(i=u.current)===null||i===void 0?void 0:i.closeAll()},open:(S=u.current)===null||S===void 0?void 0:S.open,close:(a=u.current)===null||a===void 0?void 0:a.close}}),(0,c.useEffect)(function(){ae(l)},[l]),(0,c.useEffect)(function(){if(l&&ne!==void 0){var S=l.find(function(a){return a.id===ne});S&&A&&ge(S)}},[ne]),(0,e.jsx)("div",{"data-id":"file-explorer","data-theme":xe,children:(0,e.jsx)(d.WG,{backend:d.PD,context:window,children:(0,e.jsx)(d.mp,x()(x()({ref:u,tree:te,rootId:s,render:function(a,h){var i=h.depth,T=h.isOpen,G=h.onToggle;return(0,e.jsx)(Ae,{node:a,depth:i,isOpen:T,switcherIcon:ve,isSelected:a.id===(ie==null?void 0:ie.id),onToggle:G,onSelect:Te,onRemove:v,onTextChange:Se,onCreate:I,onCancelInput:ye,dragOverAutoExpand:V,clickRowAutoExpand:ee,titleRender:Ie,showActions:_e,showInput:a.id===Pe,actions:Oe,fileIcon:he})},onDrop:F,classes:{root:"file-explorer",draggingSource:Z?"file-explorer__draggingSource":"",dropTarget:Z?"file-explorer__dropTarget":"",placeholder:Z?"":"file-explorer__placeholderContainer"}},Z?void 0:{sort:Z,insertDroppableFirst:!1,dropTargetOffset:5,placeholderRender:function(a,h){var i=h.depth;return(0,e.jsx)(ce,{depth:i})},canDrop:function(a,h){var i=h.dragSource,T=h.dropTargetId;if((i==null?void 0:i.parent)===T)return!0}}),pe))})})},Le={files2tree:ue,tree2files:L},Ue=Be}}]);
